# Forwarderett โ Local Development Guide

ุงู ูุฎุฒู ุดุงูู ฺฉ ุจฺฉโุงูุฏ Flask (ุจุง PostgreSQL) ู ฺฉ ูุฑุงูุช React/Vite ุจุฑุง ุงูุชุฎุงุจ ูุจุฏุฃ/ููุตุฏ ุงุณุช.

## ูพุดโูุงุฒูุง

- Python 3.11+
- Node.js 20 ู npm 10
- PostgreSQL ุฏุฑ ุญุงู ุงุฌุฑุง ุจุง ุฏุชุงุจุณ ุญุงู ุฌุฏุงูู `province`ุ `county` ู `city`

## ุชูุธู ูุชุบุฑูุง ูุญุท

### Backend (`backend/.env`)

ฺฉ ูุงู `.env` ุฏุฑ ูพูุดูู `backend/` (ุง ุฑุดูู ุฑูพู) ุจุณุงุฒุฏ ู ููุงุฏุฑ ุฒุฑ ุฑุง ูุฑุงุฑ ุฏูุฏ:

```env
DATABASE_URL=postgresql+psycopg2://postgres:bagheri13@127.0.0.1:5432/forwarder_db
CORS_ORIGIN=http://localhost:5173
SLA_HOURS=2
```

### Frontend (`.env.local`)

ูุงู `.env.local` ุฑุง ุฏุฑ ุฑุดูู ูพุฑูฺู ุงุฌุงุฏ ฺฉูุฏ (ุฏุฑ ฺฏุช ูุงุฏุฏู ฺฏุฑูุชู ูโุดูุฏ):

```env
VITE_API_BASE=http://127.0.0.1:5000/api
```

## ุงุฌุฑุง ุจฺฉโุงูุฏ

```bash
# macOS / Linux
python -m venv .venv
source .venv/bin/activate
pip install -r backend/requirements.txt
flask --app backend.app run

# Windows (PowerShell)
python -m venv .venv
.\.venv\Scripts\Activate.ps1
pip install -r backend/requirements.txt
flask --app backend.app run
```

> ๐ก ุงฺฏุฑ ูุจูุงู ูุญุท ูุฌุงุฒ ุฑุง ุณุงุฎุชู ู ูุนุงู ฺฉุฑุฏูโุงุฏ (ูพุฑุงููพุช ุดูุง ุจุง โ`(.venv)`โ ุดุฑูุน ูโุดูุฏ) ูุงุฒ ุจู ุงุฌุฑุง ุฏูุจุงุฑูู `python -m venv .venv` ุง ุงุณุชูุงุฏู ุงุฒ `source` ุฏุฑ PowerShell ูุณุช.

ูพุณ ุงุฒ ุงุฌุฑุงุ ุณุฑูุณ ุฑู `http://127.0.0.1:5000` ุฏุฑ ุฏุณุชุฑุณ ุงุณุช.

### ุชุณุช ุณุฑุน ุจฺฉโุงูุฏ

```bash
curl http://127.0.0.1:5000/api/health
curl http://127.0.0.1:5000/api/debug/geo-check
curl "http://127.0.0.1:5000/api/geo/provinces?limit=5"
```

## ุงุฌุฑุง ูุฑุงูุช

ุฏุฑ ุชุฑููุงู ุฏูู:

```bash
npm install
npm run dev
```

ุณูพุณ ุฑุงุจุท ุฑู `http://localhost:5173` ุฏุฑ ุฏุณุชุฑุณ ุฎูุงูุฏ ุจูุฏ ู ุฏุฑุฎูุงุณุชโูุง ุฑุง ุจู ุจฺฉโุงูุฏ (`VITE_API_BASE`) ูโูุฑุณุชุฏ.

> โน๏ธ ุงฺฏุฑ Vite ุฑู ูพูุฑุช ุฏฺฏุฑ (ูุซูุงู `http://localhost:8084`) ุงุฌุฑุง ุดุฏุ ุง ููุฏุงุฑ `CORS_ORIGIN` ุฑุง ุฏุฑ `backend/.env` ูุทุงุจู Origin ุฌุฏุฏ ุชูุธู ฺฉูุฏ (ูโุชูุงูุฏ ฺูุฏ ููุฏุงุฑ ุฑุง ุจุง ฺฉุงูุง ุฌุฏุง ฺฉูุฏุ ูุงููุฏ `CORS_ORIGIN=http://localhost:8084,http://localhost:5173`) ุง ูพูุฑุช dev ุฑุง ุซุงุจุช ูฺฏู ุฏุงุฑุฏ: `npm run dev -- --port 5173`.
>
> ุฏุฑ ูุฑ ุตูุฑุช ููุฏุงุฑ `VITE_API_BASE` ุจุงุฏ ุฑู `http://127.0.0.1:5000/api` ุจุงู ุจูุงูุฏ ุชุง ุฏุฑุฎูุงุณุชโูุง ุจู ุจฺฉโุงูุฏ ุจุฑุณูุฏ.

## ูพุฐุฑุด

- `GET /api/health` ููุฏุงุฑ `{ "ok": true }` ุจุฑูโฺฏุฑุฏุงูุฏ.
- `GET /api/debug/geo-check` ุจุงุฏ `db_ok=true` ู ุดูุงุฑุด ุฌุฏุงูู ูุซุจุช ุฏุงุดุชู ุจุงุดุฏ.
- ุงูุฏูพููุชโูุง `/api/geo/...` ุฌุณุชโูุฌู ู ุตูุญูโุจูุฏ ุฑุง ูพุดุชุจุงู ูโฺฉููุฏ.
- ุฏุฑ ูุฑุงูุชุ ุงูุชุฎุงุจ ูุจุฏุฃ/ููุตุฏ ุงุฒ ุทุฑู typeahead ฺฉุงุฑ ูโฺฉูุฏ ู ุฏุงุฏูโูุง ุงุฒ ุจฺฉโุงูุฏ ุจุงุฑฺฏุฐุงุฑ ูโุดูุฏ.
